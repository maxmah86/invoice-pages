<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Invoice System</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
  body {
    font-family: Arial, sans-serif;
    background: #f4f6f8;
    margin: 0;
    padding: 0;
  }

  header {
    background: #2c3e50;
    color: #fff;
    padding: 15px 20px;
  }

  header h1 {
    margin: 0;
    font-size: 20px;
  }

  .container {
    padding: 20px;
  }

  h2 {
    margin-top: 30px;
    font-size: 18px;
    border-bottom: 2px solid #ddd;
    padding-bottom: 5px;
  }

  .menu {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 15px;
    margin-top: 15px;
  }

  .card {
    background: #fff;
    border: 1px solid #ddd;
    padding: 15px;
    border-radius: 6px;
  }

  .card h3 {
    margin: 0 0 10px 0;
    font-size: 16px;
  }

  .card a {
    display: block;
    text-decoration: none;
    color: #0066cc;
    margin: 6px 0;
    font-size: 14px;
  }

  .card a:hover {
    text-decoration: underline;
  }

  .logout {
    margin-top: 30px;
    text-align: right;
  }

  .logout button {
    padding: 8px 14px;
    font-size: 14px;
    cursor: pointer;
  }
</style>
</head>

<body>

<header>
  <h1>MMAC Invoice System</h1>
</header>

<div class="container">

  <!-- Invoice -->
  <h2>Invoice</h2>
  <div class="menu">
    <div class="card">
      <h3>Create</h3>
      <a href="/invoice.html">â• Create Invoice</a>
    </div>

    <div class="card">
      <h3>Records</h3>
      <a href="/invoices.html">ğŸ“„ Invoice List</a>
    </div>
  </div>

  <!-- Management -->
  <h2>Management</h2>
  <div class="menu">
    <div class="card">
      <h3>Status</h3>
      <a href="/invoices.html">âœ” Mark Paid / Unpaid</a>
    </div>

    <div class="card">
      <h3>Print</h3>
      <a href="/invoices.html">ğŸ–¨ View & Print Invoice</a>
    </div>
  </div>

  <!-- System -->
  <h2>System</h2>
  <div class="menu">
    <div class="card">
      <h3>Account</h3>
      <a href="/login.html">ğŸ” Switch User</a>
    </div>

    <div class="card">
      <h3>Security</h3>
      <a href="#" onclick="logout()">ğŸšª Logout</a>
    </div>
  </div>

  <div class="logout">
    <button onclick="logout()">Logout</button>
  </div>

</div>

<script>
/* ===== ç™»å½•æ€æ£€æŸ¥ï¼ˆå…³é”®ï¼‰ ===== */
(async function checkAuth() {
  try {
    const res = await fetch("/api/auth-check", {
      credentials: "include"
    });

    if (!res.ok) {
      location.href = "/login.html";
    }
  } catch (e) {
    // ç½‘ç»œå¼‚å¸¸æ—¶ä¹Ÿç›´æ¥è¸¢å› loginï¼Œé¿å…ç©ºç™½é¡µ
    location.href = "/login.html";
  }
})();

/* ===== Logout ===== */
async function logout() {
  await fetch("/api/logout", {
    method: "POST",
    credentials: "include"
  });
  location.href = "/login.html";
}
</script>

</body>
</html>
