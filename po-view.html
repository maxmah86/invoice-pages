<!-- DELIVERY -->
<div class="section">
  <b>DELIVERY / COMPLETION:</b><br>
  Address: <span id="deliveryAddress">-</span><br>
  Date: <span id="deliveryDate">-</span><br>
  Time: <span id="deliveryTime">-</span>
</div>

<script>
fetch(`/api/po-view?id=${id}`, { credentials:"include" })
.then(r => r.json())
.then(data => {
  const po = data.po;

  document.getElementById("poNo").textContent = po.po_no;
  document.getElementById("poDate").textContent = po.po_date;
  document.getElementById("supplier").textContent = po.supplier;
  document.getElementById("issuedBy").textContent =
    po.issued_by || "MMAC SYSTEM";

  deliveryAddress.textContent = po.delivery_address || "-";
  deliveryDate.textContent = po.delivery_date || "-";
  deliveryTime.textContent = po.delivery_time || "-";

  let total = 0;
  items.innerHTML = "";

  data.items.forEach((it, i) => {
    const amount = it.qty * it.price;
    total += amount;

    items.innerHTML += `
      <tr>
        <td>${i+1}</td>
        <td>${it.description}</td>
        <td class="text-right">${it.qty}</td>
        <td class="text-right">${it.price.toFixed(2)}</td>
        <td class="text-right">${amount.toFixed(2)}</td>
      </tr>`;
  });

  document.getElementById("total").textContent = total.toFixed(2);
});
</script>
